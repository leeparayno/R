{
    "contents" : "rankall <- function(outcome, num = \"best\") {\r    ## Read outcome data\r    fullOutcomeData <- read.csv(\"rprog-data-ProgAssignment3-data/outcome-of-care-measures.csv\", colClasses = \"character\")\r\r    ## Convert to numeric numbers\r    fullOutcomeData[,11] <- as.numeric(fullOutcomeData[,11])\r    fullOutcomeData[,17] <- as.numeric(fullOutcomeData[,17])\r    fullOutcomeData[,23] <- as.numeric(fullOutcomeData[,23])    \r    \r        \r    ## Check that state and outcome are valid    \r    states <- fullOutcomeData[,7]\r    statesWithData <- sort(unique(states))\r    \r    validOutcomes <- c(\"heart attack\", \"heart failure\", \"pneumonia\")\r    \r\r    if (!(outcome %in% validOutcomes)) {\r        stop(\"invalid outcome\")\r    } \r    \r    stateData <- c()\r    ## For each state, find the hospital of the given rank\r    for (state in statesWithData) {\r        results <- c()\r        ## Limit to the current state\r        outcomeData <- fullOutcomeData[fullOutcomeData$State == state,]\r        ## Need to order the data frame by the outcome specified\r        if (outcome == \"heart attack\") {\r            valid <- outcomeData[,11] != \"Not Available\"\r            validData <- outcomeData[valid,]\r            outcomeDetails <- validData[order(validData[,11], validData[,2], na.last = NA),]\r        } else if (outcome == \"heart failure\") {\r            valid <- outcomeData[,17] != \"Not Available\"\r            validData <- outcomeData[valid,]\r            outcomeDetails <- validData[order(validData[,17], validData[,2], na.last = NA),]\r        } else if (outcome == \"pneumonia\") {\r            valid <- outcomeData[,23] != \"Not Available\"\r            validData <- outcomeData[valid,]\r            outcomeDetails <- validData[order(validData[,23], validData[,2], na.last = NA),]\r        }\r           \r        \r        #cols <- c(FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, \r        #          TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, TRUE, FALSE, FALSE, FALSE,\r        #          FALSE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE,\r        #          FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE,\r        #          FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE)\r        #outcomeDetails <- outcomeDetails[,cols]    \r        if (is.character(num)) {\r            if (num == \"best\") {\r                results <- outcomeDetails[1,2]        \r            } else if (num == \"worst\") {\r                results <- outcomeDetails[length(outcomeDetails[,1]),2]        \r            }\r        } else if (is.numeric(num) && length(num) == 1) {\r            if (num > length(outcomeDetails[,1])) {\r                results <- NA\r            } else {\r                results <- outcomeDetails[num,2]            \r            }\r        } else if (is.vector(num)) {\r            results <- outcomeDetails[num,2]\r        }\r        #results        \r        stateData <- append(stateData, results)\r        # Calling rankhospital\r        ##aRankItem <- rankhospital(state, outcome, num)\r        #record <- c(state, aRankItem)\r        #print(record)\r        #stateData <- append(stateData, aRankItem)\r    }\r    ## Return a data frame with the hospital names and the\r    ## (abbreviated) state name\r    cols <- c(\"hospital\",\"state\")\r    state.data <- data.frame(stateData, statesWithData)\r    names(state.data) <- cols\r    state.data\r}\r\rrankhospital <- function(state, outcome, num = \"best\") {\r    ## Read outcome data\r    outcomeData <- read.csv(\"rprog-data-ProgAssignment3-data/outcome-of-care-measures.csv\", colClasses = \"character\")\r    \r    ## Check that state and outcome are valid    \r    states <- outcomeData[,7]\r    statesWithData <- unique(states)\r    \r    validOutcomes <- c(\"heart attack\", \"heart failure\", \"pneumonia\")\r    \r    if (!(state %in% statesWithData)) {\r        stop(\"invalid state\")\r    } else {\r        outcomeData <- outcomeData[outcomeData$State == state,]\r    }\r    if (!(outcome %in% validOutcomes)) {\r        stop(\"invalid outcome\")\r    } else {\r        ## Need to order the data frame by the outcome specified\r        if (outcome == \"heart attack\") {\r            valid <- outcomeData[,11] != \"Not Available\"\r            outcomeData <- outcomeData[valid,]\r            outcomeDetails <- outcomeData[order(outcomeData[,11], outcomeData[,2], na.last = NA),]\r        } else if (outcome == \"heart failure\") {\r            valid <- outcomeData[,17] != \"Not Available\"\r            outcomeData <- outcomeData[valid,]\r            outcomeDetails <- outcomeData[order(outcomeData[,17], outcomeData[,2], na.last = NA),]\r        } else if (outcome == \"pneumonia\") {\r            valid <- outcomeData[,23] != \"Not Available\"\r            outcomeData <- outcomeData[valid,]\r            outcomeDetails <- outcomeData[order(outcomeData[,23], outcomeData[,2], na.last = NA),]\r        }\r    }    \r    \r    #cols <- c(FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, \r    #          TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, TRUE, FALSE, FALSE, FALSE,\r    #          FALSE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE,\r    #          FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE,\r    #          FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE)\r    #outcomeDetails <- outcomeDetails[,cols]    \r    if (is.character(num)) {\r        if (num == \"best\") {\r            results <- outcomeDetails[1,2]        \r        } else if (num == \"worst\") {\r            results <- outcomeDetails[length(outcomeDetails[,1]),2]        \r        }\r    } else if (is.numeric(num) && length(num) == 1) {\r        if (num > length(outcomeDetails[,1])) {\r            results <- NA\r        } else {\r            results <- outcomeDetails[num,2]            \r        }\r    } else if (is.vector(num)) {\r        results <- outcomeDetails[num,2]\r    }\r    results\r    #outcomeDetails[1,2]\r    ## Return hospital name in that state with the given rank\r    ## 30-day death rate\r    \r}\r",
    "created" : 1446014303566.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "666473995",
    "id" : "AAFB85BE",
    "lastKnownWriteTime" : 1446047390,
    "path" : "~/git/R/week4/rankall.R",
    "project_path" : "rankall.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 5,
    "source_on_save" : true,
    "type" : "r_source"
}